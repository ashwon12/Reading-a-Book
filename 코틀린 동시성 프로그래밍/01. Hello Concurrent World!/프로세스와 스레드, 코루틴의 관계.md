# ▪️ 프로세스와 스레드, 코루틴의 관계

![https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FX16dS%2Fbtq4XD1FOC4%2F3uLykL6PxUVlWWuksvBTh1%2Fimg.png](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FX16dS%2Fbtq4XD1FOC4%2F3uLykL6PxUVlWWuksvBTh1%2Fimg.png)

**애플리케이션이 시작**될 때, 

운영체제는 *(1)프로세스를 생산* , *(2)프로세스에 스레드를 연결* , *(3)스레드 중 메인스레드를 시작* 한다.

<br>

## Process?

프로세스는 **`실행`** 중인 애플리케이션의 인스턴스이다.

- 리소스를 여는 핸들, 프로세스 ID, 데이터, 네트워크 연결와 같은 *프로세스 상태*를 가지고 있다
- 프로세스 내부의 스레드가 프로세스의 상태를 접근할 수 있다.
- 하나의 애플리케이션은 여러개의 프로세스로 구성 될 수 있다.

<br>

## Thread?

프로세스 내에서 실행되는 **`흐름의 단위`**를 스레드라고 한다. 

- **진입점(entry point)** 

프로세스는 최소한 하나의 스레드를 포함하고 있고 애플리케이션의 진입점으로 사용된다.
대부분의 애플리케이션에서의 진입점은 `mian()` 함수이고, 이를 `메인 스레드`라고 한다.
- **종료 시점**

스레드가 끝나면! → 프로세스 종료!
- **UX, UI에서 블로킹은 안된다!**

하나의 프로세스에 많은 스레드를 만들 수 있고 스레드끼리 통신할 수 있다.
이 때, UX에 안좋은 영향을 미칠 수 있는 스레드에는 `블로킹(작업이 중단되는 것)`을 하면 안된다.


**코틀린에서는** 한두 줄의 코드로 특정 스레드나 , 스레드 풀을 생성해서 코루틴을 실행하도록 지시하면 동시성을 구현할 수 있다.

<br>

## 코루틴?

스레드 안에서 실행되는 하나의 개별적인 작업들을 루틴이라고 한다. 
여기서 `여러개의 루틴들이 협력`(co) 한다는 의미로 코루틴이라는 단어가 생겼다. 

<br>

- **스레드 안에서 하나의 코루틴이 실행된다**

코루틴은 스레드 안에서 실행되게 되고 여러개의 코루틴이 존재 할 수 있다.  
하지만 주어진 시간에 하나의 명령(코루틴)만 실행 될 수 있다. 

<br>


- **수천 개의 코루틴도 쉽게 생성 할 수 있다.**

코루틴은 빠르고 적은 비용으로 생산 할 수 있기 때문에 
스레드보다 적은 시간과 적은 자원으로 수천 개의 코루틴을  생성 할 수 있다.

<br>


- **코루틴은 스레드를 옮겨다닐 수 있다.**

스레드 안에는 존재하지만 스레드에 얽매이지 않은 가벼운 스레드이다. 
코루틴 일부를 특정 스레드에서 실행하고, 실행을 중지한 다음 다른 스레드에서 실행할 수 있다. 
코틀린이 실행 가능한 스레드로 코루틴을 이동시킨다.
